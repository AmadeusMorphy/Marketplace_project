import{a as Y,b as J}from"./chunk-DQKGJLGU.js";import{a as Z}from"./chunk-CSNRS2P6.js";import{b as I}from"./chunk-JP7PQH6C.js";import{a as K}from"./chunk-ST7ZK63N.js";import{a as ee}from"./chunk-QLC2P3T7.js";import"./chunk-ZVM6SFFR.js";import{d as T,e as E}from"./chunk-EPOEPEIN.js";import{g as Q,h as W}from"./chunk-OB3R7MWA.js";import"./chunk-HOV5GI77.js";import{a as $,b as H}from"./chunk-WDTQ3V22.js";import"./chunk-NKLDHVJZ.js";import{c as D,d as c,f as j,g as A,h as L,i as u,k as z,l as B,m as G,o as q,p as X}from"./chunk-ANFO4BS3.js";import{r as U}from"./chunk-DZMPUI2A.js";import"./chunk-PYFSW4WH.js";import{E as h,J as R,V,W as N,m as O,q as S,s as F}from"./chunk-NBA27GJI.js";import{Fb as f,Jb as v,Pb as m,Qa as C,Qb as x,Ua as s,Va as d,Wb as M,Xb as P,cb as _,ib as b,lc as k,pb as l,sb as y,wb as r,xb as i,ya as w,yb as a}from"./chunk-S34SW62A.js";var re=()=>({width:"100%"});function oe(p,o){if(p&1&&(r(0,"div",21),a(1,"img",22),r(2,"span",23),m(3),i()()),p&2){let t=o.$implicit;s(),v("alt",t.country),l("src","https://flagcdn.com/"+t.code+".svg",C),s(2),x(t.country)}}function ne(p,o){p&1&&a(0,"small",24)}var te=class p{constructor(o,t,e,n,g){this.platformId=o;this._messageService=t;this._authService=e;this._cdr=n;this._router=g;this.isBrowser=F(this.platformId),this.registerForm=new L({fullName:new u("",c.required),email:new u("",[c.required,c.email]),country:new u([],c.required),password:new u("",[c.required,this.passwordComplexityValidator()]),confirmPassword:new u("",[c.required,this.passwordMatchValidator()])}),this.registerForm.get("password")?.valueChanges.subscribe(()=>{this.registerForm.get("confirmPassword")?.updateValueAndValidity()})}isBrowser;registerForm;showPassword=!1;showConfirmPassword=!1;countries;selectedCountry;isRegistering=!1;ngOnInit(){this.countries=ee}onCountryChange(o){this.selectedCountry=o.value,console.log(this.selectedCountry),this.registerForm.get("country")?.setValue(this.selectedCountry),console.log(this.registerForm.value)}passwordComplexityValidator(){return o=>{let t=o.value,e=t&&t.length>=6,n=/\d/.test(t),g=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(t);return e&&n&&g?null:{passwordComplexity:{lengthValid:e,numberValid:n,specialCharValid:g}}}}passwordMatchValidator(){return o=>{let t=this.registerForm?.get("password")?.value,e=o.value;return t===e?null:{passwordMismatch:!0}}}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}isFormValid(){return this.registerForm.invalid}onSubmit(){this.isRegistering=!0,console.log(this.registerForm.value);let o=this.registerForm.value,t={email:o.email,password:o.password,userType:"merchant",fullName:o.fullName,status:"Pending"};this._authService.onRegister(t).subscribe({next:e=>{this._messageService.add({severity:"success",summary:"Success",detail:`${e.user.fullName} has registed an account!`}),setTimeout(()=>{this._router.navigate(["/login"])},1200)},error:e=>{this.isRegistering=!1,console.error("Error creating the user: ",e),this._messageService.add({severity:"error",summary:"Error",detail:"Something went wrong!"})}})}static \u0275fac=function(t){return new(t||p)(d(w),d(h),d(Z),d(k),d(I))};static \u0275cmp=_({type:p,selectors:[["app-merchant-register"]],features:[M([h])],decls:37,vars:13,consts:[[1,"wrapper"],[1,"inner"],[1,"flex","flex-column","gap-3",2,"margin-bottom","2rem",3,"ngSubmit","formGroup"],[1,"form-wrapper"],["id","fullName","type","text","pInputText","","formControlName","fullName"],["for","fullName"],["id","email","type","email","pInputText","","formControlName","email"],["for","email"],["formControlName","country","placeholder","Select a country",3,"onChange","options","optionLabel","filter"],["pTemplate","item"],[1,"form-wrapper","relative"],["id","password","pInputText","","formControlName","password",1,"pr-8",3,"type"],["for","password"],[1,"eyeBtn","cursor-pointer",3,"click"],[1,"pi","pi-eye"],["class","p-error",4,"ngIf"],["id","confirmPassword","pInputText","","formControlName","confirmPassword",1,"pr-8",3,"type"],["for","confirmPassword"],[1,"footer"],[1,"btn"],["type","submit",3,"disabled","label","loading"],[1,"country-item"],[1,"country-flag","w-1","h-1","mr-4",3,"src","alt"],[1,"country-name"],[1,"p-error"]],template:function(t,e){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"form",2),f("ngSubmit",function(){return e.onSubmit()}),r(3,"h3"),m(4,"Registration Form"),i(),r(5,"div",3)(6,"p-floatLabel"),a(7,"input",4),r(8,"label",5),m(9,"Full name"),i()()(),r(10,"div",3)(11,"p-floatLabel"),a(12,"input",6),r(13,"label",7),m(14,"Email"),i()()(),r(15,"div",3)(16,"p-dropdown",8),f("onChange",function(g){return e.onCountryChange(g)}),b(17,oe,4,3,"ng-template",9),i()(),r(18,"div",10)(19,"p-floatLabel"),a(20,"input",11),r(21,"label",12),m(22,"Password"),i()(),r(23,"div",13),f("click",function(){return e.togglePasswordVisibility()}),a(24,"i",14),i(),b(25,ne,1,0,"small",15),i(),r(26,"div",10)(27,"p-floatLabel"),a(28,"input",16),r(29,"label",17),m(30,"Confirm password"),i()(),r(31,"div",13),f("click",function(){return e.toggleConfirmPasswordVisibility()}),a(32,"i",14),i()(),r(33,"div",18)(34,"div",19),a(35,"p-button",20),i()()()()(),a(36,"p-toast")),t&2){let n;s(2),l("formGroup",e.registerForm),s(14),y(P(12,re)),l("options",e.countries)("optionLabel","country")("filter",!0),s(4),l("type",e.showPassword?"text":"password"),s(5),l("ngIf",((n=e.registerForm.get("password"))==null?null:n.hasError("passwordComplexity"))&&((n=e.registerForm.get("password"))==null?null:n.touched)),s(3),l("type",e.showConfirmPassword?"text":"password"),s(7),l("disabled",e.isFormValid())("label",e.isRegistering?"Registering...":"Create account")("loading",e.isRegistering)}},dependencies:[S,O,q,z,D,j,A,X,B,G,H,$,N,V,R,J,Y,K,W,Q,E,T],styles:['img[_ngcontent-%COMP%]{max-width:100%}ul[_ngcontent-%COMP%]{padding-left:0;margin-bottom:0}a[_ngcontent-%COMP%]:hover{text-decoration:none}[_ngcontent-%COMP%]:focus{outline:none}.wrapper[_ngcontent-%COMP%]{min-height:80vh;background-size:cover;background-repeat:no-repeat;display:flex;align-items:center}.inner[_ngcontent-%COMP%]{min-width:850px;margin:auto;padding-top:70px;border:2px solid rgb(71,0,165);border-radius:14px;background-clip:padding-box,border-box;background-image:url(/assets/images/merchants.jpg);padding-bottom:48px;background-repeat:no-repeat}form[_ngcontent-%COMP%]{width:50%;padding-left:45px}.form-group[_ngcontent-%COMP%]{display:flex}.form-group[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{width:50%}.form-group[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]:first-child{margin-right:20px}.form-wrapper[_ngcontent-%COMP%]{margin-bottom:17px}.form-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:9px;display:block}.form-control[_ngcontent-%COMP%]{border:1px solid #ccc;display:block;width:100%;height:40px;padding:0 20px;border-radius:20px;background:none}.form-control[_ngcontent-%COMP%]:focus{border:1px solid #ae3c33}select[_ngcontent-%COMP%]{-moz-appearance:none;-webkit-appearance:none;cursor:pointer;padding-left:20px}select[_ngcontent-%COMP%]   option[value=""][disabled][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{border:none;width:152px;height:40px;margin:29px auto auto;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;background:#ae3c33;font-size:13px;color:#fff;text-transform:uppercase;border-radius:20px;overflow:hidden;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px #0000;position:relative;-webkit-transition-property:color;transition-property:color;-webkit-transition-duration:.5s;transition-duration:.5s}button[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:-1;inset:0;background:#f11a09;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transform-origin:0 50%;transform-origin:0 50%;-webkit-transition-property:transform;transition-property:transform;-webkit-transition-duration:.5s;transition-duration:.5s;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out}button[_ngcontent-%COMP%]:hover:before{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transition-timing-function:cubic-bezier(.52,1.64,.37,.66);transition-timing-function:cubic-bezier(.52,1.64,.37,.66)}.checkbox[_ngcontent-%COMP%]{position:relative}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:22px;cursor:pointer}.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.checkmark[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;transform:translateY(-50%);height:12px;width:13px;border-radius:2px;background-color:#ebebeb;border:1px solid #ccc;color:#000;font-size:10px;font-weight:bolder}.checkmark[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none;content:"\\f26b"}@media (max-width: 991px){.inner[_ngcontent-%COMP%]{min-width:768px}}@media (max-width: 767px){.inner[_ngcontent-%COMP%]{min-width:auto;background:none;padding-top:0;padding-bottom:0}form[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px}}.p-inputtext[_ngcontent-%COMP%]{width:100%!important}.eyeBtn[_ngcontent-%COMP%]{position:absolute;top:10px;right:4%;width:17px;background-color:#e9e9e9;height:17px;display:flex;justify-content:center;align-items:center;padding:13px;border-radius:15px;color:#616161;transition:.3s ease}.eyeBtn[_ngcontent-%COMP%]:hover{background-color:#c7c7c7}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}60%{opacity:0}to{opacity:1}}'],data:{animation:[U]}})};export{te as MerchantRegisterComponent};
