import{a as N,b as V,c as Y}from"./chunk-DZPVRBE4.js";import{c as $}from"./chunk-FPUK6J7Z.js";import{a as F,b as R}from"./chunk-S6AP3ZIQ.js";import{d as B,e as L}from"./chunk-YHPV5GSY.js";import{r as z}from"./chunk-ULPWS5T4.js";import"./chunk-MU6TZGQF.js";import{A as f,E as _,V as T,W as U,k as A,m as j,q as E,s as D}from"./chunk-Z2SOHGQJ.js";import{Cb as y,Fb as S,Gb as g,Pb as m,Qa as p,Qb as v,Rb as k,Ua as o,Va as l,Wb as w,cb as P,ia as b,ib as u,ja as M,lc as I,pb as r,ub as h,vb as x,wb as i,xb as a,ya as O,yb as c}from"./chunk-TFNTKD25.js";var G=(n,t)=>t.id;function H(n,t){if(n&1&&(i(0,"div",20),c(1,"img",21),a()),n&2){let e=g().$implicit;o(),r("src","https://flagcdn.com/"+(e==null||e.location==null?null:e.location.code)+".svg",p)}}function J(n,t){if(n&1){let e=y();i(0,"div",4)(1,"div",5)(2,"div",6),c(3,"img",7),a(),i(4,"span",8),m(5),a(),u(6,H,2,1,"div",9),a(),i(7,"div",10)(8,"div",11),c(9,"img",12),a(),i(10,"div",13)(11,"h2",14),m(12),a(),i(13,"div",15),c(14,"i",16),i(15,"p",17),m(16),a()()(),i(17,"div",18)(18,"p-button",19),S("onClick",function(){let d=b(e).$implicit,C=g(2);return M(C.onUpdateStore(d))}),a()()()()}if(n&2){let e=t.$implicit,s=g(2);o(3),r("src",e.store_bg,p),o(),r("ngClass",e.status==="Active"?"badge-active":e.status==="InActive"?"badge-inactive":"badge-pending"),o(),k(" ",e.status," "),o(),r("ngIf",e==null||e.location==null?null:e.location.flag),o(2),r("ngClass",e.status==="Active"?"border-active":e.status==="InActive"?"border-inactive":"border-pending"),o(),r("src",e.store_logo,p),o(3),v(e.name),o(4),v((e==null||e.location==null?null:e.location.country)||"N/A"),o(2),r("severity",e.status==="Active"?"danger":"success")("label",e.status==="Active"?"Deactivate":"Activate")("loading",s.isUpdating)}}function K(n,t){if(n&1&&(i(0,"div",3),h(1,J,19,11,"div",4,G),a()),n&2){let e=g();r("@fadeAnimation",void 0)("@.disabled",e.isLoading),o(),x(e.stores)}}function Q(n,t){n&1&&(i(0,"div",22)(1,"div",3),c(2,"p-skeleton",23)(3,"p-skeleton",23)(4,"p-skeleton",23)(5,"p-skeleton",23)(6,"p-skeleton",23)(7,"p-skeleton",23),a()()),n&2&&(o(),r("@fadeAnimation",void 0))}var q=class n{constructor(t,e,s,d,C){this.platformId=t;this._cdr=e;this._adminService=s;this._messageService=d;this._confirmationService=C;this.isBrowser=D(this.platformId)}isBrowser;stores;status="";isUpdating=!1;isLoading=!0;ngOnInit(){this.isBrowser&&this.getStores()}getStores(){this.isLoading=!0,this._adminService.getStores().subscribe(t=>{console.log("All stores: ",t),this.stores=t.stores,this.isLoading=!1,this._cdr.detectChanges()},t=>{console.error("Error stuff: ",t),this.isLoading=!1})}onUpdateStore(t){console.log("Selected: ",t);let e;t.status==="Active"?(e="Deactivate",this.status="InActive"):(e="Activate",this.status="Active"),this._confirmationService.confirm({message:"Are you sure that you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.updateStore(t)},reject:()=>{this._messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}updateStore(t){this.isUpdating=!0;let e,s={status:this.status};(this.status="Active")?e="Deactivated":e="Activated",this.isBrowser&&(this._adminService.updateStore(t.id,s).subscribe(d=>{console.log("Store successfully updated: ",d),this.getStores(),this.isUpdating=!1,this._messageService.add({severity:"success",summary:"Success",detail:`${t.name} successfully ${e}`,life:4e3}),this.status=""},d=>{this.isUpdating=!1,console.error("Error updating: ",d),this._messageService.add({severity:"error",summary:"Error",detail:"Error updating store!"})}),this._cdr.detectChanges())}static \u0275fac=function(e){return new(e||n)(l(O),l(I),l(Y),l(_),l(f))};static \u0275cmp=P({type:n,selectors:[["app-stores"]],features:[w([_,f])],decls:5,vars:2,consts:[[1,"container","mt-3"],["class","cards-container w-full flex flex-wrap justify-content-start gap-7 mt-5",4,"ngIf"],["class","skeleton-container",4,"ngIf"],[1,"cards-container","w-full","flex","flex-wrap","justify-content-start","gap-7","mt-5"],[1,"store-card"],[1,"store-card-header","relative"],[1,"dark-overlay"],["alt","Banner",1,"banner-image",3,"src"],[1,"status-badge",3,"ngClass"],["class","flagimg",4,"ngIf"],[1,"store-card-body","relative"],[1,"store-avatar",3,"ngClass"],["alt","Avatar",3,"src"],[1,"store-details"],[1,"store-name"],[1,"location","flex","justify-content-center","align-items-center","gap-2"],[1,"pi","pi-map-marker"],[1,"store-location"],[1,"store-actions"],[3,"onClick","severity","label","loading"],[1,"flagimg"],["height","20px","width","20px","alt","",1,"flag",3,"src"],[1,"skeleton-container"],["height","20rem","width","18rem","borderRadius","16px"]],template:function(e,s){e&1&&(i(0,"div",0),u(1,K,3,2,"div",1)(2,Q,8,1,"div",2),a(),c(3,"p-toast")(4,"p-confirmDialog")),e&2&&(o(),r("ngIf",!s.isLoading),o(),r("ngIf",s.isLoading))},dependencies:[E,A,j,U,T,L,B,V,N,$,R,F],styles:['.store-card[_ngcontent-%COMP%]{width:300px;border-radius:10px;overflow:hidden;background:var(--surface-card);border:1px solid var(--surface-border);box-shadow:0 4px 10px #0000001a;transition:.3s ease-in-out}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .dark-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .dark-overlay[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;pointer-events:none}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .dark-overlay[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:.3rem .6rem;border-radius:15px;font-size:.8rem;font-weight:700;color:var(--primary-color-text);text-transform:uppercase;box-shadow:0 2px 6px #0000001a}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .status-badge.badge-active[_ngcontent-%COMP%]{background-color:#2ce42c}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .status-badge.badge-inactive[_ngcontent-%COMP%]{background-color:#ee0f0f}.store-card[_ngcontent-%COMP%]   .store-card-header[_ngcontent-%COMP%]   .status-badge.badge-pending[_ngcontent-%COMP%]{background-color:#ecca04}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin-top:-95px;border-radius:50%;overflow:hidden;border:3px solid}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]{text-align:center;margin-top:.4rem}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .store-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin:0}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .store-location[_ngcontent-%COMP%], .store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-details[_ngcontent-%COMP%]   .pi-map-marker[_ngcontent-%COMP%]{font-size:.9rem;color:#777;margin:.2rem 0 1rem}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.5rem}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:5px;border:none;font-size:.9rem;cursor:pointer;transition:background .3s ease}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-actions[_ngcontent-%COMP%]   .btn.edit-store[_ngcontent-%COMP%]{background:#000;color:#fff}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-actions[_ngcontent-%COMP%]   .btn.edit-store[_ngcontent-%COMP%]:hover{background:#333}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-actions[_ngcontent-%COMP%]   .btn.settings[_ngcontent-%COMP%]{background:#f0f0f0;color:#000}.store-card[_ngcontent-%COMP%]   .store-card-body[_ngcontent-%COMP%]   .store-actions[_ngcontent-%COMP%]   .btn.settings[_ngcontent-%COMP%]:hover{background:#e0e0e0}.flagimg[_ngcontent-%COMP%]{top:10px;position:absolute;left:10px;background:#29292973;padding:7px;border-radius:20px;width:40px;display:flex;justify-content:center}.border-active[_ngcontent-%COMP%]{border-color:#2ce42c!important}.border-inactive[_ngcontent-%COMP%]{border-color:#ee0f0f!important}.border-pending[_ngcontent-%COMP%]{border-color:#ecca04!important}'],data:{animation:[z]}})};export{q as StoresComponent};
